<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Wizard Form View -->
    <record id="view_zid_product_update_wizard_form" model="ir.ui.view">
        <field name="name">zid.product.update.wizard.form</field>
        <field name="model">zid.product.update.wizard</field>
        <field name="arch" type="xml">
            <form string="Update Product Data in Zid">
                <sheet>
                    <!-- Header Information -->
                    <group col="4">
                        <field name="product_id" invisible="1"/>
                        <field name="zid_connector_id" readonly="1"/>
                        <field name="zid_product_id" readonly="1"/>
                    </group>

                    <notebook>
                        <!-- Basic Information Tab -->
                        <page string="Basic Information" name="basic_info">
                            <group string="Product Name">
                                <field name="update_name"/>
                                <group col="2" invisible="not update_name">
                                    <field name="name_ar" placeholder="اسم المنتج بالعربي"/>
                                    <field name="name_en" placeholder="Product Name in English"/>
                                </group>
                            </group>

                            <group string="SKU &amp; Barcode">
                                <group>
                                    <field name="update_sku"/>
                                    <field name="sku" invisible="not update_sku" required="update_sku"/>
                                </group>
                                <group>
                                    <field name="update_barcode"/>
                                    <field name="barcode" invisible="not update_barcode"/>
                                </group>
                            </group>

                            <group string="Product Status">
                                <field name="update_status"/>
                                <group col="4" invisible="not update_status">
                                    <field name="is_published"/>
                                    <field name="is_draft"/>
                                    <field name="is_taxable"/>
                                    <field name="requires_shipping"/>
                                </group>
                            </group>
                        </page>

                        <!-- Pricing Tab -->
                        <page string="Pricing" name="pricing">
                            <group string="Price Settings">
                                <field name="update_price"/>
                                <group col="2" invisible="not update_price">
                                    <field name="price" widget="monetary"/>
                                    <field name="sale_price" widget="monetary"/>
                                    <field name="cost" widget="monetary"/>
                                </group>
                            </group>
                        </page>

                        <!-- Description Tab -->
                        <page string="Description" name="description">
                            <group string="Product Description">
                                <field name="update_description"/>
                                <separator string="Main Description" invisible="not update_description"/>
                                <field name="description_ar" invisible="not update_description"
                                       placeholder="وصف المنتج بالعربي"/>
                                <field name="description_en" invisible="not update_description"
                                       placeholder="Product description in English"/>
                                <separator string="Short Description" invisible="not update_description"/>
                                <field name="short_description_ar" invisible="not update_description"
                                       placeholder="وصف مختصر بالعربي"/>
                                <field name="short_description_en" invisible="not update_description"
                                       placeholder="Short description in English"/>
                            </group>
                        </page>

                        <!-- Stock &amp; Weight Tab -->
                        <page string="Stock &amp; Weight" name="stock_weight">
                            <group string="Stock Information">
                                <field name="update_stock"/>
                                <group col="2" invisible="not update_stock">
                                    <field name = "stock_location"/>
                                    <field name="stock_location_id"
                                           required="update_stock"/>
                                    <field name="stock_quantity"/>
                                    <field name="is_infinite_stock"/>
                                </group>
                            </group>

                            <group string="Weight Information">
                                <field name="update_weight"/>
                                <group col="2" invisible="not update_weight">
                                    <field name="weight_value"/>
                                    <field name="weight_unit"/>
                                </group>
                            </group>
                        </page>

                        <!-- SEO Tab -->
                        <page string="SEO" name="seo">
                            <group string="Search Engine Optimization">
                                <field name="update_seo"/>
                                <group invisible="not update_seo">
                                    <field name="slug" placeholder="product-url-slug"/>
                                    <separator string="SEO Title"/>
                                    <field name="seo_title_ar" placeholder="عنوان SEO بالعربي"/>
                                    <field name="seo_title_en" placeholder="SEO Title in English"/>
                                    <separator string="SEO Description"/>
                                    <field name="seo_description_ar" placeholder="وصف SEO بالعربي"/>
                                    <field name="seo_description_en" placeholder="SEO Description in English"/>
                                </group>
                            </group>

                            <group string="Keywords">
                                <field name="update_keywords"/>
                                <field name="keywords" invisible="not update_keywords"
                                       placeholder="keyword1, keyword2, keyword3"/>
                            </group>
                        </page>

                        <!-- Badge &amp; Categories Tab -->
                        <page string="Badge &amp; Categories" name="badge_categories">
                            <group string="Product Badge">
                                <field name="update_badge"/>
                                <group invisible="not update_badge">
                                    <field name="badge_text_ar" placeholder="نص الشارة بالعربي"/>
                                    <field name="badge_text_en" placeholder="Badge text in English"/>
                                    <field name="badge_icon"/>
                                </group>
                            </group>

                            <group string="Categories">
                                <field name="update_categories"/>
                                <field name="category_ids" invisible="not update_categories"
                                       placeholder="cat-id-1, cat-id-2, cat-id-3"/>
                            </group>
                        </page>
                    </notebook>
                </sheet>

                <footer>
                    <button name="action_update_in_zid"
                            type="object"
                            string="Update in Zid"
                            class="btn-primary"/>
                    <button string="Cancel"
                            class="btn-secondary"
                            special="cancel"/>
                </footer>
            </form>
        </field>
    </record>

    <!-- Wizard Action -->
    <record id="action_zid_product_update_wizard" model="ir.actions.act_window">
        <field name="name">Update Product in Zid</field>
        <field name="res_model">zid.product.update.wizard</field>
        <field name="view_mode">form</field>
        <field name="target">new</field>
        <field name="binding_model_id" ref="product.model_product_template"/>
        <field name="binding_view_types">form</field>
    </record>

    <!-- Add button to product form -->
    <record id="view_product_template_form_zid_wizard_button" model="ir.ui.view">
        <field name="name">product.template.form.zid.wizard.button</field>
        <field name="model">product.template</field>
        <field name="inherit_id" ref="product.product_template_form_view"/>
        <field name="arch" type="xml">
            <!-- Add button in header -->
            <xpath expr="//header" position="inside">
                <field name = "zid_exists" invisible="1" />
                <button name="action_open_update_wizard"
                        type="object"
                        string="Update Data in Zid"
                        class="btn-primary"
                        invisible="not zid_exists"
                />
            </xpath>
        </field>
    </record>

    <!-- Alternative: Add button in Zid Data page -->
<!--    <record id="view_product_template_form_zid_wizard_button_in_page" model="ir.ui.view">-->
<!--        <field name="name">product.template.form.zid.wizard.button.page</field>-->
<!--        <field name="model">product.template</field>-->
<!--        <field name="inherit_id" ref="view_product_template_form_zid_integration"/>-->
<!--        <field name="arch" type="xml">-->
<!--            &lt;!&ndash; Add button in Zid Data page actions section &ndash;&gt;-->
<!--            <xpath expr="//page[@name='zid_data']//button[@name='update_in_zid']" position="after">-->
<!--                <field name = "zid_exists" invisible="1" />-->
<!--                <button name="%(action_zid_product_update_wizard)d"-->
<!--                        type="action"-->
<!--                        string="Advanced Update"-->
<!--                        class="btn-secondary"-->
<!--                        invisible="not zid_exists"-->
<!--                        context="{'default_product_id': id}"-->
<!--                        icon="fa-cogs"/>-->
<!--            </xpath>-->
<!--        </field>-->
<!--    </record>-->
</odoo>
