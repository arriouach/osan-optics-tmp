<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Tree View for Stock Lines -->
    <record id="view_zid_variant_stock_line_tree" model="ir.ui.view">
        <field name="name">zid.variant.stock.line.tree</field>
        <field name="model">zid.variant.stock.line</field>
        <field name="arch" type="xml">
            <list string="Variant Stock by Location" create="0" multi_edit="1">
                <field name="variant_id"/>
                <field name="variant_sku"/>
                <field name="location_id"/>
                <field name="location_type"/>
                <field name="available_quantity" sum="Total Stock"/>
                <field name="is_infinite"/>
                <field name="display_quantity"/>
                <field name="stock_level" widget="badge"/>
                <field name="is_active" widget="boolean_toggle"/>
                <field name="last_update"/>
            </list>
        </field>
    </record>

    <!-- Form View for Stock Lines -->
    <record id="view_zid_variant_stock_line_form" model="ir.ui.view">
        <field name="name">zid.variant.stock.line.form</field>
        <field name="model">zid.variant.stock.line</field>
        <field name="arch" type="xml">
            <form string="Variant Stock Line">
                <sheet>
                    <div class="oe_button_box" name="button_box">
                        <button name="action_view_variant" type="object"
                                class="oe_stat_button" icon="fa-cube">
                            <field name="variant_name" widget="statinfo" string="Variant"/>
                        </button>
                        <button name="action_view_location" type="object"
                                class="oe_stat_button" icon="fa-map-marker">
                            <field name="location_name" widget="statinfo" string="Location"/>
                        </button>
                    </div>

                    <widget name="web_ribbon" title="Unlimited Stock"
                            bg_color="bg-success"
                            invisible="not is_infinite"/>
                    <widget name="web_ribbon" title="Out of Stock"
                            bg_color="bg-danger"
                            invisible="is_infinite or available_quantity &gt; 0"/>
                    <widget name="web_ribbon" title="Low Stock"
                            bg_color="bg-warning"
                            invisible="is_infinite or available_quantity &lt;= 0 or available_quantity &gt; 10"/>

                    <div class="oe_title">
                        <h1>
                            <field name="display_name" readonly="1"/>
                        </h1>
                    </div>

                    <group>
                        <group string="Variant Information">
                            <field name="variant_id" readonly="1"/>
                            <field name="variant_sku" readonly="1"/>
                            <field name="parent_product_id" readonly="1"/>
                        </group>
                        <group string="Location Information">
                            <field name="location_id" readonly="1"/>
                            <field name="location_type" readonly="1"/>
                            <field name="is_default_location" readonly="1"/>
                        </group>
                    </group>

                    <group>
                        <group string="Stock Information">
                            <field name="stock_id" readonly="1"/>
                            <field name="available_quantity"/>
                            <field name="is_infinite"/>
                            <field name="display_quantity" readonly="1"/>
                            <field name="stock_level" readonly="1"/>
                        </group>
                        <group string="Status">
                            <field name="is_active"/>
                            <field name="last_update"/>
                            <field name="connector_id" readonly="1"/>
                        </group>
                    </group>

                    <group string="Actions">
                        <button name="update_stock" type="object"
                                string="Update Stock" class="btn-primary"/>
                        <button name="sync_from_zid" type="object"
                                string="Sync from Zid" class="btn-secondary"/>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <!-- Search View for Stock Lines -->
    <record id="view_zid_variant_stock_line_search" model="ir.ui.view">
        <field name="name">zid.variant.stock.line.search</field>
        <field name="model">zid.variant.stock.line</field>
        <field name="arch" type="xml">
            <search string="Search Stock Lines">
                <field name="variant_id"/>
                <field name="variant_sku"/>
                <field name="location_id"/>

                <filter string="In Stock" name="in_stock"
                        domain="['|', ('is_infinite', '=', True), ('available_quantity', '&gt;', 0)]"/>
                <filter string="Out of Stock" name="out_of_stock"
                        domain="[('is_infinite', '=', False), ('available_quantity', '&lt;=', 0)]"/>
                <filter string="Low Stock" name="low_stock"
                        domain="[('is_infinite', '=', False), ('available_quantity', '&lt;=', 10), ('available_quantity', '&gt;', 0)]"/>
                <filter string="Unlimited Stock" name="unlimited"
                        domain="[('is_infinite', '=', True)]"/>

                <separator/>

                <filter string="Active" name="active"
                        domain="[('is_active', '=', True)]"/>
                <filter string="Default Locations" name="default_location"
                        domain="[('is_default_location', '=', True)]"/>

                <group expand="0" string="Group By">
                    <filter string="Variant" name="group_variant"
                            context="{'group_by': 'variant_id'}"/>
                    <filter string="Location" name="group_location"
                            context="{'group_by': 'location_id'}"/>
                    <filter string="Location Type" name="group_location_type"
                            context="{'group_by': 'location_type'}"/>
                    <filter string="Stock Level" name="group_stock_level"
                            context="{'group_by': 'stock_level'}"/>
                </group>
            </search>
        </field>
    </record>

    <!-- Pivot View for Stock Analysis -->
    <record id="view_zid_variant_stock_line_pivot" model="ir.ui.view">
        <field name="name">zid.variant.stock.line.pivot</field>
        <field name="model">zid.variant.stock.line</field>
        <field name="arch" type="xml">
            <pivot string="Stock Analysis">
                <field name="location_id" type="row"/>
                <field name="variant_id" type="col"/>
                <field name="available_quantity" type="measure"/>
            </pivot>
        </field>
    </record>

    <!-- Graph View for Stock Analysis -->
    <record id="view_zid_variant_stock_line_graph" model="ir.ui.view">
        <field name="name">zid.variant.stock.line.graph</field>
        <field name="model">zid.variant.stock.line</field>
        <field name="arch" type="xml">
            <graph string="Stock Distribution" type="bar">
                <field name="location_id"/>
                <field name="available_quantity" type="measure"/>
            </graph>
        </field>
    </record>

    <!-- Action for Stock Lines -->
    <record id="action_zid_variant_stock_line" model="ir.actions.act_window">
        <field name="name">Variant Stock by Location</field>
        <field name="res_model">zid.variant.stock.line</field>
        <field name="view_mode">list,form,pivot,graph</field>
        <field name="search_view_id" ref="view_zid_variant_stock_line_search"/>
        <field name="context">{'search_default_in_stock': 1}</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                No stock data found
            </p>
            <p>
                Stock data will appear here after importing variants
            </p>
        </field>
    </record>

    <!-- Menu Items -->
</odoo>
